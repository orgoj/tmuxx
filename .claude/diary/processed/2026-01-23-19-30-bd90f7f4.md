# Session Diary

**Date**: 2026-01-23 19:30
**Session ID**: bd90f7f4-da5c-48e5-ae4e-a2657f885e1f
**Project**: /home/michael/work/ai/TOOLS/tmuxcc

## Task Summary

User asked how the "No TODOs" feature works in tmuxcc. After explaining the code, user pointed out that the source of TODO markers wasn't clear - they didn't understand WHERE the TODO items come from. Investigation revealed this wasn't documented in README, so I added comprehensive documentation explaining the Summary View feature.

## Work Done

- Investigated "No TODOs" display logic in `src/ui/components/pane_preview.rs`
- Explained that TODO markers (`☐`/`☑`) are created by Claude Code's TaskCreate/TaskList tools
- Clarified that tmuxcc only parses these markers from pane output, doesn't create them
- Added new "Summary View" section to README.md documenting:
  - Left column (TODOs) - what the markers mean and how they're created
  - Right column (Activity) - current activity and recent tools
  - Toggle behavior with `s` key
  - Example of how tasks are created in Claude Code
- Committed only README.md changes, leaving other modified files unstaged per user request

## Design Decisions

**Documentation placement**: Added Summary View section after Key Bindings and before Configuration
- Reason: Logical flow - user learns keybindings first, then what they control, then how to configure

**Content structure**: Two-column explanation with examples
- Reason: Matches the actual UI layout (TODOs left, Activity right)

**Explicit source attribution**: Emphasized that Claude Code creates the TODOs, tmuxcc only displays them
- Reason: This was the core confusion - users might think tmuxcc has its own task system

## Challenges & Solutions

| Challenge | Solution |
|-----------|----------|
| User didn't understand where TODO markers originate | Traced through code to find they're parsed from Claude Code output, not generated by tmuxcc |
| README lacked explanation of Summary View | Added comprehensive section with examples of how Claude Code creates tasks |
| Multiple files modified but user only wanted README committed | Used `git reset`, then `git add README.md` to stage only the desired file |

## Mistakes & Corrections

### Where I Made Errors:

- Initially only explained the parsing code without addressing WHERE the TODO markers come from
- User had to explicitly ask "a kde se ty TODO polozky berou" (where do the TODO items come from) before I realized the documentation gap

### What Caused the Mistakes:

- Focused too narrowly on the code implementation without considering user's mental model
- Didn't verify whether README explained the feature adequately before answering
- Should have proactively checked documentation completeness when explaining a user-facing feature

## Lessons Learned

### Technical Lessons:

- tmuxcc's Summary View parses multiple marker types from Claude Code output:
  - `☐`/`☑` for TODO items (from TaskCreate/TaskList tools)
  - `✽` for current activity
  - `⏺` for recent tool executions
- Parser is in `ClaudeCodeSummary::parse()` in pane_preview.rs

### Process Lessons:

- When explaining how something works, ALWAYS check if it's documented
- User-facing features need user-perspective documentation, not just code comments
- If user asks "how does X work", they probably mean "how do I use X", not "what's the code structure"

### To Remember for CLAUDE.md:

- Nothing specific to add - existing guidelines were followed correctly after user clarification
- Git workflow reminder worked well: user said "jen svoje" (only yours) and I correctly unstaged other files

## Skills & Commands Used

### Used in this session:

- [x] Skill: N/A - straightforward documentation task

### Feedback for Skills/Commands:

No skills used - this was a simple documentation improvement task.

## User Preferences Observed

### Git & PR Preferences:

- Prefers selective staging when multiple files are modified
- Explicitly states which files to commit ("comituj jen svoje" = commit only yours)
- Uses descriptive commit messages with "docs:" prefix for documentation changes
- Accepts Co-Authored-By line in commits

### Code Quality Preferences:

- No code changes in this session

### Communication Preferences:

- Uses Czech for conversation but expects English in code/docs/commits
- Direct communication style - "dela vas ted vic, comituj jen svoje" (there's more of yours, commit only yours)

## Code Patterns Used

N/A - documentation-only changes

## Notes

- User has good understanding of tmuxcc internals - was reading code themselves
- The "No TODOs" display is a fallback when summary.todos is empty
- Summary View feature is Claude Code-specific - other agents show basic status only (documented in note at end of new section)
- Repository has uncommitted changes in .dippy, config.rs, and config_override.rs - user chose not to commit these yet
