# Reflection: Last 4 Entries

**Generated**: 2026-01-27 17:35
**Entries Analyzed**: 4
**Date Range**: 2026-01-27 to 2026-01-27

## Summary
The last 4 sessions focused on stabilizing and optimizing `tmuxx` (version 0.2.1 -> 0.2.2). Key achievements include implementing a "Kill Session" feature using `respawn-pane` for reliability, adding a "Pi Powerline" theme with content-based detection, ensuring safe configuration reloading to prevent crashes, and optimizing CPU usage by switching to an event-driven redraw loop.

Development practices solidified around strict git hygiene (atomic commits, immutable release history), "KISS" architectural decisions (regex > heuristics), and a strong reliance on the skill system. A critical environmental constraint—using relative paths and specific tools like `rg`—was highlighted and reinforced.

## Patterns Identified

### Strong Patterns (3+ occurrences)
1. **Mandatory Quality Checks** (3/4 entries)
   - Observation: `cargo check`, `clippy`, and `fmt` are consistently run before commits.
   - CLAUDE.md rule: `- Quality: Run cargo check, clippy, and fmt before every commit`

2. **Atomic & Conventional Commits** (3/4 entries)
   - Observation: Commits are kept atomic (one logical change) with multi-line, conventional messages.
   - CLAUDE.md rule: `- Git: Use atomic commits with conventional format (feat:, fix:, perf:)`

3. **Skill-First Workflow** (4/4 entries)
   - Observation: Every session explicitly invoked specific skills (`tmuxx-testing`, `tmuxx-commit`, etc.).
   - CLAUDE.md rule: `- Workflow: ALWAYS invoke relevant project skills before starting tasks`

### Emerging Patterns (2 occurrences)
1. **Config-Driven Development** (2/4 entries)
   - Observation: New features (Kill, Powerline) were immediately exposed via `config.toml`.
   - CLAUDE.md rule: `- Config: All new features must be configurable in config.toml`

2. **Immutable History** (2/4 entries)
   - Observation: Released versions in CHANGELOG are frozen; test data is never deleted, only moved.
   - CLAUDE.md rule: `- History: Never delete test data (move/rename) and treat released CHANGELOG versions as immutable`

3. **TUI Performance** (2/4 entries)
   - Observation: Lazy fetching and conditional redrawing were used to save CPU.
   - CLAUDE.md rule: `- Performance: Use conditional redrawing (needs_redraw) and lazy data fetching`

### Rule Violations Detected
- Rule: "Use RELATIVE paths" (Environment Override)
- Violation: Used absolute paths in `safe-config-reload` session.
- Action: Add explicit rule to CLAUDE.md to reinforce the environment override.

- Rule: "Tool Preference"
- Violation: Used `grep` instead of `rg`.
- Action: Add explicit rule for `rg`.

## Proposed CLAUDE.md Updates

### Core Principles
- Paths: ALWAYS use relative paths (no absolute paths).
- Tools: Use `rg` (ripgrep) for searching, never `grep`.
- Data: Never delete test fixtures/data; move or rename them if needed.

### Development
- TUI: Implement `needs_redraw` logic to minimize CPU usage (event-driven).
- Process: `respawn-pane -k` is preferred over signals for killing panes.
- Config: Design for graceful degradation (e.g., safe reload on syntax error).

## One-Off Observations
- Use `write` to create files/dirs if `mkdir` is restricted by environment.
- Auto-correct Czech comments/docs to English immediately.

## Metadata
- Entries analyzed:
  - 2026-01-27-08-45-tmuxx-kill-session-impl.md
  - 2026-01-27-16-00-pi-powerline-fix.md
  - 2026-01-27-17-15-safe-config-reload.md
  - 2026-01-27-17-18-cpu-optimization.md
