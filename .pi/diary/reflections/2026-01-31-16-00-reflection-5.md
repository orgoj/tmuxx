# Reflection: Last 5 Entries

**Generated**: 2026-01-31 16:00
**Entries Analyzed**: 5
**Date Range**: 2026-01-28 to 2026-01-31

## Summary
The project is moving towards a highly customizable and robust TUI application. There is a strong emphasis on "Config-First" design, where even subtle UI behaviors like indentation and highlight colors are moved out of code and into `defaults.toml`. Process-wise, the user demands high discipline in versioning (syncing three files) and commit formatting. A recurring technical challenge is the reliability of git operations in the presence of lock files, and a process "trap" where agents attempt to run the TUI interactively.

## Patterns Identified

### Strong Patterns (3+ occurrences)
1. **Config-First Architecture** (4/5 entries)
   - Observation: Constant push to move hardcoded logic, UI styles, and detection rules into `defaults.toml`.
   - CLAUDE.md rule: `- config-first: ZERO TOLERANCE for hardcoded interactive behaviors or UI styles; always use defaults.toml and verify user-configurability.`

2. **Strict Version Synchronization** (4/5 entries)
   - Observation: Version bumps MUST update `Cargo.toml`, `Cargo.lock`, and `CHANGELOG.md` simultaneously.
   - CLAUDE.md rule: `- versioning: synchronize version strings across Cargo.toml, Cargo.lock, and CHANGELOG.md in a single commit.`

3. **CLI tool priority** (3/5 entries)
   - Observation: User prefers specialized CLI tools (like `dot`) over manual file edits in metadata directories.
   - CLAUDE.md rule: `- tool usage: always use provided CLI tools (dot, git, etc.) for metadata management; avoid direct edits to .pi/ or .dots/ unless necessary.`

### Emerging Patterns (2 occurrences)
1. **No Interactive TUIs** (2/5 entries)
   - Observation: Agents often forget that they cannot interact with a TUI and try to `cargo run`.
   - CLAUDE.md rule: `- interactive runs: NEVER run interactive TUI apps in the bash tool; use build, syntax, and unit tests for verification.`

2. **Proactive Tooling Maintenance** (2/5 entries)
   - Observation: Missing tools like `rustfmt` or `clippy` cause friction.
   - CLAUDE.md rule: `- tool maintenance: proactively install missing toolchain components (e.g., rustfmt) instead of reporting failure.`

3. **Async I/O for UI Fluidity** (2/5 entries)
   - Observation: Using async commands prevents blocking the main UI loop.
   - CLAUDE.md rule: `- async design: prefer tokio::spawn for I/O and external commands to ensure TUI responsiveness.`

## Rule Violations Detected
- **Rule**: "11. Skipping Skills: Attempting tasks without invoking relevant skills leads to mistakes"
- **Violation**: The agent tried to run `cargo run` and forgot version synchronization steps because they didn't fully follow the `tmuxx-bumping-versions` skill or lacked a rule against interactive runs.
- **Action**: Added "No interactive runs" rule and strengthened "versioning" rule.

## Proposed CLAUDE.md Updates

### Key Principles
```
- interactive runs: NEVER run interactive TUI apps (like cargo run) in the bash tool; use build, syntax, and unit tests for verification.
- tool maintenance: proactively install missing toolchain components (e.g., rustfmt) instead of reporting failure.
- async design: prefer tokio::spawn for I/O and external commands to ensure TUI responsiveness.
```

### Important Implementation Details
```
- versioning: synchronize version strings across Cargo.toml, Cargo.lock, and CHANGELOG.md in a single commit.
```

## One-Off Observations
- User uses `zed -n` as the preferred editor command.
- User has a preference for "Zero Indentation" on selection indicators.
- User uses `notify-send` for desktop notifications.

## Metadata
- Entries analyzed:
  - .pi/diary/2026-01-31-15-50-session.md
  - .pi/diary/processed/2026-01-29-20-30-FIX-PI-DETECTION.md
  - .pi/diary/processed/2026-01-29-16-45-arch-design.md
  - .pi/diary/processed/2026-01-29-16-38-SESSION.md
  - .pi/diary/processed/2026-01-28-17-45-8A2F.md
